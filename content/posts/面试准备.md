---
title: 面试准备
date: 2018-08-01 21:40:30
tags: [面试]
---

做一个简单的面试题记录，方便查询回顾。

## PHP

1. 合并两个数组有几种方式，试比较他们的异同
   - `+` 操作符只会追加不存在的索引对应的值，不会重新重排索引
   - `array_merge` 数字索引时会追加，并会重排索引。字符串索引时，会覆盖掉前面同名索引。
1. 请写一个函数来检查用户提交的数据是否为整数（不区分数据类型，可以为二进制、八进制、十进制、十六进制数字）

   ```php
   function is_int_number($n)
   {
       if (is_numeric($n) && strpos($n, '.') === false) {
           return true;
       }
       return false;
   }
   ```

1. session 和 cookie 的区别

Session 是在服务端保存的一个数据结构，用来跟踪用户的状态，这个数据可以保存在集群、数据库、Redis、Memcache、文件中

Cookie 是客户端保存用户信息的一种机制，用来记录用户的一些信息，也是实现 Session 的一种方式。

禁用 Cookie 之后可以通过 url 传递 Session_id 的方式使用 Session。

1. PHP 的 strtolower()和 strtoupper()函数在安装非中文系统的服务器下可能会导致将汉字转换为乱码，请写两个替代的函数实现兼容 Unicode 文字的字符串大小写转换

   ```php
   function myStrToUpper($str)
   {
       $data = str_split($str);
       $result = '';
       foreach($data as $item) {
           $v = ord($item);
           if ($v >= 97 && $v <= 122 ){
               $v -= 32;
           }
           $result .= chr($v);
       }

       return $result;
   }
   ```

1. PHP 的 is_writeable()函数存在 Bug，无法准确判断一个目录/文件是否可写，请写一个函数来判断目录/文件是否绝对可写

1. 魔术变量

   ```php
   __FILE__
   __LINE__
   __DIR__
   __FUNCTION__
   __CLASS__
   __TRAIT__
   __METHOD__
   __NAMESPACE__
   ```

1. 魔术方法

   ```php
   __construct()
   __destruct()
   __call()
   __callStatic()
   __get()
   __set()
   __isset()
   __unset()
   __sleep()
   __wakeup()
   __toString()
   __invoke()
   __set_state()
   __clone()
   __debugInfo()
   ```

1. 浏览器输入网址到返回数据 都经历了什么
   1. 查询 dns（系统缓存， 浏览器缓存）
   1. 建立 TCP 链接
   1. 发送 HTTP 请求
   1. nginx 接收请求，转发
   1. php-fpm 解析脚本 （opcode）
   1. 返回响应结果
   1. 关闭 TCP 链接
   1. 浏览器解析 HTML，并渲染页面

## 前端常见跨域解决方案

1. 通过 jsonp 跨域
2. document.domain + iframe 跨域
3. location.hash + iframe
4. window.name + iframe 跨域
5. postMessage 跨域
6. 跨域资源共享（CORS）
7. nginx 代理跨域
8. nodejs 中间件代理跨域
9. WebSocket 协议跨域
